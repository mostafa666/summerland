import React, { Component } from 'react';
import { connect } from 'react-redux';
import logo from './../common/images/logo.jpeg'
import image from './../common/images/4785514.jpg'
import search from './../common/images/search.svg'
import { Link } from 'react-router-dom/cjs/react-router-dom';
import { toggleSignin, toggleUserBox, toggleShowCart, toggleMobileMenu } from './../actions/globalAction';
class Header extends Component {
    header = React.createRef();
    
    render () {
        return (
            <React.Fragment>
                <header className="header">
                    <div className="header__top">
                        <div className="header__right">
                            <button onClick={() => this.props.dispatch(toggleMobileMenu())} className="header__right--toggleMenu">
                            <svg viewBox="0 0 384.97 384.97" >
                                <g>
                                    <g>
                                        <path d="M12.03,120.303h360.909c6.641,0,12.03-5.39,12.03-12.03c0-6.641-5.39-12.03-12.03-12.03H12.03
                                            c-6.641,0-12.03,5.39-12.03,12.03C0,114.913,5.39,120.303,12.03,120.303z"/>
                                        <path d="M372.939,180.455H12.03c-6.641,0-12.03,5.39-12.03,12.03s5.39,12.03,12.03,12.03h360.909c6.641,0,12.03-5.39,12.03-12.03
                                            S379.58,180.455,372.939,180.455z"/>
                                        <path d="M372.939,264.667H132.333c-6.641,0-12.03,5.39-12.03,12.03c0,6.641,5.39,12.03,12.03,12.03h240.606
                                            c6.641,0,12.03-5.39,12.03-12.03C384.97,270.056,379.58,264.667,372.939,264.667z"/>
                                    </g><g></g><g></g><g></g><g></g><g></g><g></g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g>
                                </svg>
                            </button>
                            <img className="header__right--logo" src={logo} alt="لوگوی سامرلند" title="لوگوی سامرلند" />
                            <form className="header__right--search">
                                <img src={search} alt="آیکن جست و جو"/>
                                <input type="search" placeholder="جست و جو در مدیسه..." />
                                <ShowResult />
                            </form>
                        </div>
                        <div className="header__left">
                            <svg onClick={() => this.props.dispatch(toggleUserBox())} className="header__left--user" viewBox="0 0 60 60"><g><path d="M48.014,42.889l-9.553-4.776C37.56,37.662,37,36.756,37,35.748v-3.381c0.229-0.28,0.47-0.599,0.719-0.951  c1.239-1.75,2.232-3.698,2.954-5.799C42.084,24.97,43,23.575,43,22v-4c0-0.963-0.36-1.896-1-2.625v-5.319  c0.056-0.55,0.276-3.824-2.092-6.525C37.854,1.188,34.521,0,30,0s-7.854,1.188-9.908,3.53C17.724,6.231,17.944,9.506,18,10.056  v5.319c-0.64,0.729-1,1.662-1,2.625v4c0,1.217,0.553,2.352,1.497,3.109c0.916,3.627,2.833,6.36,3.503,7.237v3.309  c0,0.968-0.528,1.856-1.377,2.32l-8.921,4.866C8.801,44.424,7,47.458,7,50.762V54c0,4.746,15.045,6,23,6s23-1.254,23-6v-3.043  C53,47.519,51.089,44.427,48.014,42.889z M51,54c0,1.357-7.412,4-21,4S9,55.357,9,54v-3.238c0-2.571,1.402-4.934,3.659-6.164  l8.921-4.866C23.073,38.917,24,37.354,24,35.655v-4.019l-0.233-0.278c-0.024-0.029-2.475-2.994-3.41-7.065l-0.091-0.396l-0.341-0.22  C19.346,23.303,19,22.676,19,22v-4c0-0.561,0.238-1.084,0.67-1.475L20,16.228V10l-0.009-0.131c-0.003-0.027-0.343-2.799,1.605-5.021  C23.253,2.958,26.081,2,30,2c3.905,0,6.727,0.951,8.386,2.828c1.947,2.201,1.625,5.017,1.623,5.041L40,16.228l0.33,0.298  C40.762,16.916,41,17.439,41,18v4c0,0.873-0.572,1.637-1.422,1.899l-0.498,0.153l-0.16,0.495c-0.669,2.081-1.622,4.003-2.834,5.713  c-0.297,0.421-0.586,0.794-0.837,1.079L35,31.623v4.125c0,1.77,0.983,3.361,2.566,4.153l9.553,4.776  C49.513,45.874,51,48.28,51,50.957V54z" data-original="#000000"  data-old_color="#000000" fill="#AAAAAA"/></g> </svg>
                            <svg onClick={() =>this.props.dispatch(toggleShowCart())} className="header__left--cart" viewBox="0 -11 414.00226 414">
                                <g>
                                    <path d="m202.480469 352.132812c0-21.800781-17.671875-39.472656-39.46875-39.472656-21.800781 0-39.472657 17.671875-39.472657 39.46875 0 21.800782 17.671876 39.472656 39.472657 39.472656 21.785156-.023437 39.445312-17.679687 39.46875-39.46875zm-64.941407 0c0-14.070312 11.402344-25.472656 25.472657-25.472656 14.066406 0 25.46875 11.402344 25.46875 25.46875 0 14.070313-11.402344 25.472656-25.46875 25.472656-14.0625-.015624-25.457031-11.410156-25.472657-25.46875zm0 0" data-original="#000000"  data-old_color="#000000" fill="#AAAAAA"/><path d="m309.167969 391.601562c21.800781.003907 39.472656-17.667968 39.472656-39.46875.003906-21.800781-17.667969-39.472656-39.46875-39.472656s-39.472656 17.671875-39.472656 39.472656c.027343 21.785157 17.679687 39.441407 39.46875 39.46875zm0-64.941406c14.066406 0 25.472656 11.402344 25.472656 25.46875.003906 14.066406-11.402344 25.472656-25.46875 25.472656s-25.472656-11.402343-25.472656-25.46875c.015625-14.058593 11.410156-25.453124 25.46875-25.472656zm0 0" data-original="#000000" data-old_color="#000000" fill="#AAAAAA"/><path d="m7 14h42.699219c14.050781-.054688 26.03125 10.175781 28.171875 24.066406l33.800781 213.511719c3.191406 20.703125 21.050781 35.957031 42 35.875h208.929687c3.863282 0 7-3.136719 7-7 0-3.867187-3.136718-7-7-7h-208.929687c-14.050781.054687-26.03125-10.179687-28.171875-24.066406l-5.746094-36.300781h213.980469c18.117187-.007813 34.242187-11.484376 40.179687-28.597657l39.699219-114.578125c.746094-2.140625.40625-4.507812-.90625-6.355468-1.316406-1.84375-3.441406-2.941407-5.707031-2.941407h-311.386719l-3.914062-24.738281c-3.191407-20.703125-21.050781-35.9570312-42-35.875h-42.699219c-3.867188 0-7 3.136719-7 7 0 3.867188 3.132812 7 7 7zm390.164062 60.617188-36.476562 105.285156c-3.984375 11.480468-14.800781 19.179687-26.953125 19.183594h-216.199219l-19.707031-124.472657zm0 0" data-original="#000000" data-old_color="#000000" fill="#AAAAAA"/>
                                </g>
                            </svg>
                            {
                                this.props.state.global.userToggleBox? <UserBox dispatch={this.props.dispatch} />: null
                            }
                        </div>
                    </div>
                </header>
                <div className="header__margin"></div>
            </React.Fragment>
        )
    }
}
const ShowResult =() => {
    return (
        <div className="showResult">
            <ul>
                <li>
                    <img src={image} alt={'title'}/>
                    <p>کت مردانه با لیبل سبز رنگ الماسی و گرد</p>
                </li>
                <li>
                    <img src={image} alt={'title'}/>
                    <p>کت مردانه با لیبل سبز رنگ الماسی و گرد</p>
                </li>
                <li>
                    <img src={image} alt={'title'}/>
                    <p>کت مردانه با لیبل سبز رنگ الماسی و گرد</p>
                </li>
                <li>
                    <img src={image} alt={'title'}/>
                    <p>کت مردانه با لیبل سبز رنگ الماسی و گرد</p>
                </li>
            </ul>
        </div>
    )
}

const UserBox = ({dispatch}) => {
    const token = localStorage.getItem('token');
    const nickname = localStorage.getItem('nickname');
    const isLogedIn = nickname && token;
    return isLogedIn?
        (
            <div className="header__left--userBox">
                <ul>
                    <li onClick={() => dispatch(toggleUserBox())}>
                        <svg  viewBox="0 0 128 128"><path d="m121.5 62.25h-53.275l9.523-9.523a1.75 1.75 0 0 0 -2.475-2.475l-12.508 12.508a1.755 1.755 0 0 0 -.221.271c-.025.038-.042.079-.064.118a1.045 1.045 0 0 0 -.149.352c-.016.052-.036.1-.047.157a1.756 1.756 0 0 0 0 .685c.011.054.031.1.046.156a1.7 1.7 0 0 0 .053.17 1.732 1.732 0 0 0 .1.182c.022.039.039.081.065.119a1.755 1.755 0 0 0 .221.271l12.504 12.507a1.75 1.75 0 0 0 2.475-2.475l-9.523-9.523h53.275a1.75 1.75 0 0 0 0-3.5z"/><path d="m96 72.25a1.75 1.75 0 0 0 -1.75 1.75v36.9h-45.041v-93.8h45.041v36.9a1.75 1.75 0 0 0 3.5 0v-38.65a1.75 1.75 0 0 0 -1.75-1.75h-46.791v-7.1a1.75 1.75 0 0 0 -2.461-1.6l-39.808 17.693a1.751 1.751 0 0 0 -1.039 1.6v79.615a1.751 1.751 0 0 0 1.039 1.6l39.808 17.692a1.75 1.75 0 0 0 2.461-1.6v-7.1h46.791a1.75 1.75 0 0 0 1.75-1.75v-38.65a1.75 1.75 0 0 0 -1.75-1.75zm-50.291 46.558-36.309-16.138v-77.34l36.309-16.138z"/><path d="m13.076 97.083a1.75 1.75 0 0 0 1.75-1.75v-28.666a1.75 1.75 0 0 0 -3.5 0v28.666a1.75 1.75 0 0 0 1.75 1.75z"/></svg>
                        <Link to="/account/profile">
                             حساب کاربری
                        </Link>
                    </li>
                    <li onClick={() => dispatch(toggleUserBox())}>
                        
                        <svg viewBox="0 0 128 128"><path d="m13.076 97.083a1.75 1.75 0 0 0 1.75-1.75v-28.666a1.75 1.75 0 0 0 -3.5 0v28.666a1.75 1.75 0 0 0 1.75 1.75z"/><path d="m122.38 64.97c.027-.041.046-.085.069-.128a1.037 1.037 0 0 0 .146-.348c.015-.051.035-.1.045-.152a1.755 1.755 0 0 0 0-.685c-.01-.053-.03-.1-.045-.152a1.733 1.733 0 0 0 -.054-.174 1.692 1.692 0 0 0 -.092-.174c-.023-.042-.042-.086-.069-.127a1.75 1.75 0 0 0 -.22-.269l-12.509-12.509a1.75 1.75 0 0 0 -2.475 2.475l9.524 9.523h-53.276a1.75 1.75 0 0 0 0 3.5h53.276l-9.523 9.523a1.75 1.75 0 1 0 2.475 2.475l12.508-12.509a1.75 1.75 0 0 0 .22-.269z"/><path d="m95.424 72.25a1.75 1.75 0 0 0 -1.75 1.75v36.9h-45.041v-93.8h45.041v36.9a1.75 1.75 0 1 0 3.5 0v-38.65a1.75 1.75 0 0 0 -1.75-1.75h-46.791v-7.1a1.75 1.75 0 0 0 -2.461-1.6l-39.807 17.693a1.751 1.751 0 0 0 -1.039 1.6v79.615a1.751 1.751 0 0 0 1.039 1.6l39.807 17.692a1.75 1.75 0 0 0 2.461-1.6v-7.1h46.791a1.75 1.75 0 0 0 1.75-1.75v-38.65a1.75 1.75 0 0 0 -1.75-1.75zm-50.291 46.558-36.307-16.138v-77.34l36.307-16.138z"/></svg>
                        <Link to="/account/logout">
                            خروج 
                        </Link>
                    </li>
                </ul>
            </div>
        )   
        :(
            <div className="header__left--userBox">
                <ul>
                    <li onClick={() => {
                        dispatch(toggleSignin())
                        dispatch(toggleUserBox())
                    }}>
                        
                    <svg  viewBox="0 0 60 60"><g><path d="M48.014,42.889l-9.553-4.776C37.56,37.662,37,36.756,37,35.748v-3.381c0.229-0.28,0.47-0.599,0.719-0.951  c1.239-1.75,2.232-3.698,2.954-5.799C42.084,24.97,43,23.575,43,22v-4c0-0.963-0.36-1.896-1-2.625v-5.319  c0.056-0.55,0.276-3.824-2.092-6.525C37.854,1.188,34.521,0,30,0s-7.854,1.188-9.908,3.53C17.724,6.231,17.944,9.506,18,10.056  v5.319c-0.64,0.729-1,1.662-1,2.625v4c0,1.217,0.553,2.352,1.497,3.109c0.916,3.627,2.833,6.36,3.503,7.237v3.309  c0,0.968-0.528,1.856-1.377,2.32l-8.921,4.866C8.801,44.424,7,47.458,7,50.762V54c0,4.746,15.045,6,23,6s23-1.254,23-6v-3.043  C53,47.519,51.089,44.427,48.014,42.889z M51,54c0,1.357-7.412,4-21,4S9,55.357,9,54v-3.238c0-2.571,1.402-4.934,3.659-6.164  l8.921-4.866C23.073,38.917,24,37.354,24,35.655v-4.019l-0.233-0.278c-0.024-0.029-2.475-2.994-3.41-7.065l-0.091-0.396l-0.341-0.22  C19.346,23.303,19,22.676,19,22v-4c0-0.561,0.238-1.084,0.67-1.475L20,16.228V10l-0.009-0.131c-0.003-0.027-0.343-2.799,1.605-5.021  C23.253,2.958,26.081,2,30,2c3.905,0,6.727,0.951,8.386,2.828c1.947,2.201,1.625,5.017,1.623,5.041L40,16.228l0.33,0.298  C40.762,16.916,41,17.439,41,18v4c0,0.873-0.572,1.637-1.422,1.899l-0.498,0.153l-0.16,0.495c-0.669,2.081-1.622,4.003-2.834,5.713  c-0.297,0.421-0.586,0.794-0.837,1.079L35,31.623v4.125c0,1.77,0.983,3.361,2.566,4.153l9.553,4.776  C49.513,45.874,51,48.28,51,50.957V54z" data-original="#000000" /></g> </svg>
                        ورود                
                    </li>
                    <li onClick={() => dispatch(toggleUserBox())}>
                        <svg viewBox="0 0 128 128"><path d="m121.5 62.25h-53.275l9.523-9.523a1.75 1.75 0 0 0 -2.475-2.475l-12.508 12.508a1.755 1.755 0 0 0 -.221.271c-.025.038-.042.079-.064.118a1.045 1.045 0 0 0 -.149.352c-.016.052-.036.1-.047.157a1.756 1.756 0 0 0 0 .685c.011.054.031.1.046.156a1.7 1.7 0 0 0 .053.17 1.732 1.732 0 0 0 .1.182c.022.039.039.081.065.119a1.755 1.755 0 0 0 .221.271l12.504 12.507a1.75 1.75 0 0 0 2.475-2.475l-9.523-9.523h53.275a1.75 1.75 0 0 0 0-3.5z"/><path d="m96 72.25a1.75 1.75 0 0 0 -1.75 1.75v36.9h-45.041v-93.8h45.041v36.9a1.75 1.75 0 0 0 3.5 0v-38.65a1.75 1.75 0 0 0 -1.75-1.75h-46.791v-7.1a1.75 1.75 0 0 0 -2.461-1.6l-39.808 17.693a1.751 1.751 0 0 0 -1.039 1.6v79.615a1.751 1.751 0 0 0 1.039 1.6l39.808 17.692a1.75 1.75 0 0 0 2.461-1.6v-7.1h46.791a1.75 1.75 0 0 0 1.75-1.75v-38.65a1.75 1.75 0 0 0 -1.75-1.75zm-50.291 46.558-36.309-16.138v-77.34l36.309-16.138z"/><path d="m13.076 97.083a1.75 1.75 0 0 0 1.75-1.75v-28.666a1.75 1.75 0 0 0 -3.5 0v28.666a1.75 1.75 0 0 0 1.75 1.75z"/></svg>
                        <Link to="/register">    
                        ثبت نام
                        </Link>
                    </li>
                </ul>
            </div>
        )
}

export default connect(state => ({ state }))(Header);
